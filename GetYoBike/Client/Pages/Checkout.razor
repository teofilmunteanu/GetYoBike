@page "/checkout"

@inject IJSRuntime JsRuntime
@using GetYoBike.Shared.Models;
@inject NavigationManager NavManager
@inject HttpClient Http

@*<header>
    <b><b style="color:#6594EF;">Rent City Bike</b> - Payment</b>
</header>*@
<Header Color="#6594EF" Title="Rent City Bike" Subtitle="Payment" />
<div class="grid-container">

    <div class="left">

        <form action="" method="post" id="formContainer">
            <div class="username">
                <div class="cardnr-grid">
                    <label for="Card Number" class="formLabel">Card Number</label>
                    <br />
                    <input type="number" name="Card Number" id="cardnumber" class="cardnr">
                </div>
                <div class="firstname-grid">
                    <label for="first Name" class="formLabel">CVC</label>
                    <br />
                    <input type="number" name="First Name" id="firstname" class="cvc">
                </div>
                <div class="month-grid">
                    <label for="month" class="formLabel">Card Expiration Date</label>
                    <br />
                    <input type="month" name="month" id="month" class="month" placeholder="month">
                </div>
                <div class="cardname-grid">
                    <label for="cardname" class="formLabel">Name On Card</label>
                    <br />
                    <input type="cardname" name="cardname" id="cardname" class="cardname">
                </div>

                <br />
            </div>
        </form>
        <div class="backbutton" @onclick="BackToDetails">
            <i class="fa fa-arrow-left"></i><span> Rent Details</span>
        </div>
    </div>

    <div class="right-top">
        <img src="@SelectedImagePath" class="img-div">
    </div>

    <div class="right-bottom">
        <total class="total">
            <span>Total: 65 lei</span>
        </total>
        <button class="button" style="vertical-align:middle">
            <span>Checkout </span>
        </button>
    </div>
</div>

@code {
    [Parameter]
    [SupplyParameterFromQuery(Name = "userId")]
    public int UserId{ get; set; }

    [Parameter]
    [SupplyParameterFromQuery(Name = "type")]
    public int BikeType { get; set; }

    [Parameter]
    [SupplyParameterFromQuery(Name = "date")]
    public string RentDate { get; set; }

    [Parameter]
    [SupplyParameterFromQuery(Name = "duration")]
    public int RentDuration { get; set; }

    public string SelectedImagePath { get; set; } = "";

    protected override async Task OnInitializedAsync()
    {
        switch (BikeType)
        {
            case 1:
                SelectedImagePath = "assets/rentCityBike.png";
                break;
            case 2:
                SelectedImagePath = "assets/rentMountainBike.png";
                break;
        }
    }

    public void BackToDetails()
    {
        //Eventually give the parameters back(two types of @page)
        //$"/checkout?id={user.Id}&type={bikeTypeNr}&date={RentDate}&duration={RentDuration}"
        NavManager.NavigateTo($"/details/{BikeType}");
    }
}
